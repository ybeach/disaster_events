import{f as j,r as S,h as K,i as R,w as M,u as m,j as L,k as U,l as W,m as B,p as G,q as z,o as d,b as v,s as r,t as J,v as Q,x as Y,y as H,z as V,A as X,a as I,B as F,C as f,D as q,F as T,E as Z,c as $,G as E,H as ee,I as te,J as O}from"./entry.d0f411db.js";const ne=()=>null;function ae(...t){var b,C,A,P,x,w,D,N,y;const u=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(u);let[n,s,e={}]=t;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");e.server=(b=e.server)!=null?b:!0,e.default=(C=e.default)!=null?C:ne,e.defer&&console.warn("[useAsyncData] `defer` has been renamed to `lazy`. Support for `defer` will be removed in RC."),e.lazy=(P=(A=e.lazy)!=null?A:e.defer)!=null?P:!1,e.initialCache=(x=e.initialCache)!=null?x:!0,e.immediate=(w=e.immediate)!=null?w:!0;const a=j(),c=()=>(a.isHydrating||e.initialCache)&&a.payload.data[n]!==void 0;a._asyncData[n]||(a._asyncData[n]={data:S(c()?a.payload.data[n]:(N=(D=e.default)==null?void 0:D.call(e))!=null?N:null),pending:S(!c()),error:S((y=a.payload._errors[n])!=null?y:null)});const o={...a._asyncData[n]};o.refresh=o.execute=(h={})=>a._asyncDataPromises[n]?a._asyncDataPromises[n]:h._initial&&c()?a.payload.data[n]:(o.pending.value=!0,a._asyncDataPromises[n]=new Promise((_,i)=>{try{_(s(a))}catch(k){i(k)}}).then(_=>{e.transform&&(_=e.transform(_)),e.pick&&(_=se(_,e.pick)),o.data.value=_,o.error.value=null}).catch(_=>{var i,k;o.error.value=_,o.data.value=m((k=(i=e.default)==null?void 0:i.call(e))!=null?k:null)}).finally(()=>{o.pending.value=!1,a.payload.data[n]=o.data.value,o.error.value&&(a.payload._errors[n]=!0),delete a._asyncDataPromises[n]}),a._asyncDataPromises[n]);const l=()=>o.refresh({_initial:!0}),g=e.server!==!1&&a.payload.serverRendered;{const h=L();if(h&&!h._nuxtOnBeforeMountCbs){h._nuxtOnBeforeMountCbs=[];const i=h._nuxtOnBeforeMountCbs;h&&(K(()=>{i.forEach(k=>{k()}),i.splice(0,i.length)}),R(()=>i.splice(0,i.length)))}g&&a.isHydrating&&n in a.payload.data?o.pending.value=!1:h&&(a.payload.serverRendered&&a.isHydrating||e.lazy)&&e.immediate?h._nuxtOnBeforeMountCbs.push(l):e.immediate&&l(),e.watch&&M(e.watch,()=>o.refresh());const _=a.hook("app:data:refresh",i=>{if(!i||i.includes(n))return o.refresh()});h&&R(_)}const p=Promise.resolve(a._asyncDataPromises[n]).then(()=>o);return Object.assign(p,o),p}function se(t,u){const n={};for(const s of u)n[s]=t[s];return n}function oe(t,u,n){const[s={},e]=typeof u=="string"?[{},u]:[u,n],a=s.key||e;if(!a||typeof a!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+a);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const c="$f"+a,o=U(()=>{let y=t;return typeof y=="function"&&(y=y()),W(y)?y.value:y}),{server:l,lazy:g,default:p,transform:b,pick:C,watch:A,initialCache:P,...x}=s,w={...x,cache:typeof s.cache=="boolean"?void 0:s.cache},D={server:l,lazy:g,default:p,transform:b,pick:C,initialCache:P,watch:[o,...A||[]]};return ae(c,()=>$fetch(o.value,w),D)}const re=t=>(H("data-v-53370f98"),t=t(),V(),t),ue=["onSubmit"],ce=["placeholder"],ie=re(()=>r("button",{class:"search-btn",type:"submit"},"\u691C\u7D22",-1)),le=B({__name:"SearchForm",props:{ql:String},setup(t){const u=t;G();const n=S("");z(),u.ql==""?s():u.ql;function s(){return"\u30AD\u30FC\u30EF\u30FC\u30C9   e.g.\u300C\u96E8\u300D"}function e(){return"\u30AD\u30FC\u30EF\u30FC\u30C9   e.g.\u300C\u96E8\u300D"}function a(){return!!n.value&&!/^\s+$/.test(n.value)}function c(){if(a())return X({path:"/",query:{q:n.value}})}return(o,l)=>(d(),v("div",null,[r("form",{class:"search-form",onSubmit:Y(c,["prevent"])},[J(r("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=g=>n.value=g),ref:"searchForm",placeholder:e()},null,8,ce),[[Q,n.value]]),ie],40,ue)]))}}),de=I(le,[["__scopeId","data-v-53370f98"]]),_e=t=>(H("data-v-e7bbaa61"),t=t(),V(),t),fe={class:"sr"},he={key:0},ye={key:0},me=_e(()=>r("tr",null,[r("th",{class:"oneline"},"ID"),r("th",{class:"oneline"},"\u548C\u66A6"),r("th",{class:"oneline"},"\u30B0\u30EC\u30B4\u30EA\u30AA\u66A6"),r("th",{class:"oneline"},"\u5730\u57DF"),r("th",null,"\u5929\u5909\u5730\u7570\u306A\u3069\u306E\u8A18\u4E8B"),r("th",null,"\u539F\u51FA\u5178"),r("th",null,"\u63B2\u8F09\u66F8\u8A8C")],-1)),pe={class:"oneline"},ve={class:"oneline"},ge={class:"oneline"},be={class:"oneline"},Ce=B({__name:"ArticleList",props:{lists:Object,total:Number,keyword:String},setup(t){const u=t;return(n,s)=>(d(),v(T,null,[r("div",fe,[F(" \u30D2\u30C3\u30C8\uFF1A"+f(u.total)+" \u4EF6 ",1),t.keyword.length>0?(d(),v("span",he,", \u30AD\u30FC\u30EF\u30FC\u30C9:"+f(t.keyword),1)):q("",!0)]),u.total>0?(d(),v("div",ye,[r("table",null,[me,(d(!0),v(T,null,Z(u.lists,e=>(d(),v("tr",{key:e.id},[r("td",pe,f(e.id),1),r("td",ve,f(e.wareki),1),r("td",ge,f(e.gregorian),1),r("td",be,f(e.area),1),r("td",null,f(e.text),1),r("td",null,f(e.source),1),r("td",null,f(e.book),1)]))),128))])])):q("",!0)],64))}}),xe=I(Ce,[["__scopeId","data-v-e7bbaa61"]]),we={class:"paging"},De={class:"total"},ke=F("<<"),qe=F("<"),Fe=F(">"),Ae=F(">>"),Pe=B({__name:"PaginationWithSearch",props:{numPages:Number,current:Number,q:String,limit:Number},setup(t){const u=t,n=z();function s(e){return"/?"+(u.q.length>0?"q="+u.q+"&":"")+"page="+e+"&limit="+u.limit}return M(()=>n.query,()=>location.reload()),(e,a)=>{const c=ee;return d(),v("div",we,[r("div",De,[t.current>1?(d(),$(c,{key:0,to:s(1)},{default:E(()=>[ke]),_:1},8,["to"])):q("",!0),t.current>1?(d(),$(c,{key:1,to:s(t.current-1)},{default:E(()=>[qe]),_:1},8,["to"])):q("",!0),F(" \u30DA\u30FC\u30B8 "+f(t.current)+"/"+f(t.numPages)+" ",1),t.current<t.numPages?(d(),$(c,{key:2,to:s(t.current+1)},{default:E(()=>[Fe]),_:1},8,["to"])):q("",!0),t.current<t.numPages?(d(),$(c,{key:3,to:s(t.numPages)},{default:E(()=>[Ae]),_:1},8,["to"])):q("",!0)])])}}}),$e=I(Pe,[["__scopeId","data-v-def76157"]]),Ee={class:"divider"},Se={class:"aside"},Be={class:"container"},Ie=B({__name:"index",async setup(t){let u,n;const s=z(),e=Number(s.query.page),a=s.query.page==null||e<1?1:e,c=Number(s.query.limit),o=s.query.limit==null||c<5?30:c,l=s.query.q==null?"":s.query.q,g={limit:o,page:a,q:l},{data:p}=([u,n]=te(()=>oe("/api/list",{params:g},"$QdkyuMY9pK")),u=await u,n(),u),b=p.value.total,C=Math.ceil(p.value.total/o);return M(()=>s.query,()=>location.reload()),(A,P)=>{const x=de,w=xe,D=$e;return d(),v("div",null,[r("div",Ee,[r("div",Se,[O(x,{ql:m(l)},null,8,["ql"])]),r("div",Be,[O(w,{lists:m(p).resd,total:m(b),keyword:m(l)},null,8,["lists","total","keyword"])])]),O(D,{numPages:m(C),current:m(a),q:m(l),limit:m(o)},null,8,["numPages","current","q","limit"])])}}});const Oe=I(Ie,[["__scopeId","data-v-35062e9b"]]);export{Oe as default};
